<div align="center">

# NagaAgent

**ä½ çš„è¶…çº§AIç§˜ä¹¦**

æµå¼å·¥å…·è°ƒç”¨ Â· çŸ¥è¯†å›¾è°±è®°å¿† Â· Live2D è™šæ‹Ÿå½¢è±¡ Â· è¯­éŸ³äº¤äº’ Â· å¨œè¿¦ç½‘ç»œç¤¾åŒº

[ç®€ä½“ä¸­æ–‡](README3.md) | [English](README_en.md)

![NagaAgent](https://img.shields.io/badge/NagaAgent-5.1.0-blue?style=for-the-badge&logo=python&logoColor=white)
![Platform](https://img.shields.io/badge/Platform-Windows%20%7C%20macOS%20%7C%20Linux-green?style=for-the-badge)
![License](https://img.shields.io/badge/License-AGPL%203.0%20%7C%20Proprietary-yellow?style=for-the-badge)
![Python](https://img.shields.io/badge/Python-3.11-blue?style=for-the-badge&logo=python)

[![Stars](https://img.shields.io/github/stars/Xxiii8322766509/NagaAgent?style=social)](https://github.com/Xxiii8322766509/NagaAgent)
[![Forks](https://img.shields.io/github/forks/Xxiii8322766509/NagaAgent?style=social)](https://github.com/Xxiii8322766509/NagaAgent)
[![Issues](https://img.shields.io/github/issues/Xxiii8322766509/NagaAgent)](https://github.com/Xxiii8322766509/NagaAgent/issues)

**[QQ æœºå™¨äººè”åŠ¨ï¼šUndefined QQbot](https://github.com/69gg/Undefined/)**

</div>

---

**åŒè®¸å¯è¯** Â· å¼€æºé‡‡ç”¨ [AGPL-3.0](LICENSE)ï¼Œé—­æºé‡‡ç”¨ [ä¸“å±è®¸å¯](LICENSE-CLOSED-SOURCE)ï¼ˆéœ€ä¹¦é¢æˆæƒï¼‰ã€‚
å•†ä¸šåˆä½œï¼šcontact@nagaagent.com / bilibiliã€æŸæ–¯é˜”è½ã€‘

---

## æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | å†…å®¹ |
|------|------|------|
| ğŸ† 2026-02-26 | 5.1.0 | å¨œè¿¦ç½‘ç»œç¤¾åŒºè®ºå›ä¸Šçº¿ï¼›è®¾ç½®ä¸‰åˆä¸€é‡æ„ï¼›æ—…è¡Œæ¨¡å¼ï¼›ç§¯åˆ†é…é¢é¡µï¼›æ¢æœºé›†å¸‚ä¸ä¸»é¢æ¿æ›´æ–° |
| âš¡ 2026-02-25 | 5.1.0 | TTS å…¨é“¾è·¯ä¿®å¤ï¼ˆCORS / asyncioï¼‰ï¼›build.py è·¨å¹³å°æ„å»ºï¼›ä¸Šä¸‹æ–‡å‹ç¼©æŒä¹…åŒ–ï¼›è§’è‰²ç³»ç»Ÿæ›´æ–°ï¼›æç¤ºè¯æ³¨å…¥æ¶æ„é‡æ„ |
| ğŸµ 2026-02-24 | â€” | Neo4j è¿æ¥è¶…æ—¶ä¿®å¤ï¼›ç»Ÿä¸€ BGM æ’­æ”¾å™¨ï¼›éŸ³å¾‹åŠæ­Œå•ç¼–è¾‘ï¼›MCP ç®¡ç† UIï¼›æ‚¬æµ®çƒé€æ˜çª—å£ + æ‚¬åœäº®åº¦ |
| ğŸ—ï¸ 2026-02-23 | â€” | è·¨å¹³å°æ„å»ºå®Œå–„ï¼›ç‰ˆæœ¬å·ç»Ÿä¸€ pyproject.toml ç®¡ç†ï¼›æç¤ºè¯/æˆªå›¾/è§†è§‰ä¼˜åŒ–ï¼›è§’è‰²æ–‡ä»¶æ‰“åŒ…è¿ç§» |
| ğŸ’• 2026-02-22 | â€” | ç§¯åˆ†å¥½æ„Ÿåº¦ç³»ç»Ÿï¼ˆç­¾åˆ° / å¥½æ„Ÿåº¦ / ç§¯åˆ†ï¼‰ï¼›æ‚¬æµ®çƒé˜´å½±ä¸æ‹–æ‹½ä¿®å¤ï¼›ç™»å½•è‡ªåŠ¨æ¢å¤ï¼›OpenClaw hooks ä¿®å¤ |
| ğŸ¶ 2026-02-21 | â€” | éŸ³å¾‹åŠå›¾æ ‡æ›´æ–°ï¼›MCP Agents æ›´æ–°ï¼›æ‚¬æµ®çƒå°æŒ‰é’® |
| ğŸ—œï¸ 2026-02-20 | â€” | ä¸Šä¸‹æ–‡å‹ç¼©ä¸‰çº§é‡æ„ï¼ˆ`<compress>` æ ‡ç­¾ / è·¨ä¼šè¯ç»§æ‰¿ï¼‰ï¼›MCP ç®¡ç† UIï¼›æ‚¬æµ®çƒé€æ˜çª—å£ï¼›éŸ³å¾‹åŠåŠŸèƒ½ä¿®æ­£ |
| ğŸ”„ 2026-02-19 | â€” | SSE å»é™¤ base64 ç›´æ¥ JSON ä¼ è¾“ï¼›ç§»é™¤å†—ä½™åå°æ„å›¾åˆ†æå™¨ï¼›config_manager è‡ªåŠ¨æ£€æµ‹ç¼–ç  |
| ğŸ”§ 2026-02-17 | â€” | æ‚¬æµ®çƒåºåˆ—å¸§è·¯å¾„æ”¹ä¸ºç›¸å¯¹è·¯å¾„ï¼Œä¿®å¤æ‰“åŒ…åå¤´åƒä¸æ˜¾ç¤º |
| ğŸš€ 2026-02-16 | 5.0.0 | NagaModel ç½‘å…³ç»Ÿä¸€æ¥å…¥ï¼›DeepSeek æ¨ç†é“¾å®æ—¶å±•ç¤ºï¼›è®°å¿†äº‘æµ· UI è‡ªé€‚åº”ä¿®å¤ |
| ğŸ§  2026-02-15 | â€” | ç»Ÿä¸€é™„åŠ çŸ¥è¯†å— + æ¶ˆé™¤å†å²æ±¡æŸ“ï¼›LLM æµå¼é‡è¯•ï¼›ä¸ƒå¤©è‡ªåŠ¨ç™»å½•ï¼›å¼€æœºè‡ªå¯åŠ¨ |
| ğŸŒŠ 2026-02-14 | â€” | NagaMemory äº‘ç«¯è¿œç¨‹è®°å¿†ï¼›æ„è¯†æµ· 3D é‡å†™ï¼›å¯åŠ¨ç²’å­åŠ¨ç”»ï¼›ç‰ˆæœ¬æ›´æ–°æ£€æŸ¥å¼¹çª—ï¼›ç”¨æˆ·ä½¿ç”¨åè®® |
| âœ¨ 2026-02-13 | â€” | æ‚¬æµ®çƒ 4 çŠ¶æ€æ¨¡å¼ï¼›æˆªå±å¤šæ¨¡æ€è§†è§‰åˆ‡æ¢ï¼›æŠ€èƒ½å·¥åŠé‡æ„ï¼›Live2D è¡¨æƒ…é€šé“ç‹¬ç«‹ |
| ğŸ¨ 2026-02-12 | â€” | NagaCAS è®¤è¯ï¼›Live2D 4 é€šé“æ­£äº¤åŠ¨ç”»æ¶æ„ï¼›Agentic Tool Loopï¼›æ˜æ—¥æ–¹èˆŸé£æ ¼å¯åŠ¨ç•Œé¢ |
| ğŸ“¦ 2026-02-11 | â€” | åµŒå…¥å¼ OpenClaw æ‰“åŒ…ï¼›å¯åŠ¨è‡ªåŠ¨ä»æ¨¡æ¿ç”Ÿæˆé…ç½®æ–‡ä»¶ |
| ğŸ› ï¸ 2026-02-10 | â€” | åç«¯æ‰“åŒ…ä¼˜åŒ–ï¼›æŠ€èƒ½å·¥åŠ MCP çŠ¶æ€ä¿®å¤ï¼›å»é™¤å†—ä½™ Agent/MCP ä»…ä¿ç•™ OpenClaw |
| ğŸŒ± 2026-02-09 | â€” | å‰ç«¯é‡æ„ï¼›Live2D ç¦ç”¨çœ¼ç›è¿½è¸ªï¼›OpenClaw æ›´åä¸º AgentServer |

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [åŠŸèƒ½å¯¼è§ˆï¼ˆä¸»é¢æ¿ï¼‰](#åŠŸèƒ½å¯¼è§ˆä¸»é¢æ¿)
3. [å¯¹è¯](#1-å¯¹è¯--messagerview)
4. [è®°å¿†äº‘æµ·](#2-è®°å¿†äº‘æµ·--mindview)
5. [æŠ€èƒ½å·¥åŠ](#3-æŠ€èƒ½å·¥åŠ--skillview)
6. [å¨œè¿¦ç½‘ç»œ](#4-å¨œè¿¦ç½‘ç»œ--è®ºå›ç¤¾åŒº)
7. [æ¢æœºé›†å¸‚](#5-æ¢æœºé›†å¸‚--marketview)
8. [ç»ˆç«¯è®¾ç½®](#6-ç»ˆç«¯è®¾ç½®--configview)
9. [éŸ³å¾‹åŠ](#7-éŸ³å¾‹åŠ--musicview)
10. [æ‚¬æµ®çƒ](#8-æ‚¬æµ®çƒ--floatingview)
11. [å…¨å±€åŠŸèƒ½](#å…¨å±€åŠŸèƒ½)
12. [åç«¯æ¶æ„](#åç«¯æ¶æ„)
13. [å¯é€‰é…ç½®](#å¯é€‰é…ç½®)
14. [ç«¯å£ä¸€è§ˆ](#ç«¯å£ä¸€è§ˆ)
15. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.11ï¼ˆ`>=3.11, <3.12`ï¼‰
- å¯é€‰ï¼š[uv](https://github.com/astral-sh/uv) â€” åŠ é€Ÿä¾èµ–å®‰è£…
- å¯é€‰ï¼šNeo4j â€” æœ¬åœ°çŸ¥è¯†å›¾è°±è®°å¿†

### å®‰è£…

```bash
git clone https://github.com/Xxiii8322766509/NagaAgent.git
cd NagaAgent


#å‰ç«¯å®‰è£…
cd frontend
npm install
cd..


#åç«¯å®‰è£…
# æ–¹å¼ä¸€ï¼šsetup è„šæœ¬ï¼ˆè‡ªåŠ¨æ£€æµ‹ç¯å¢ƒã€åˆ›å»ºè™šæ‹Ÿç¯å¢ƒã€å®‰è£…ä¾èµ–ï¼‰
python setup.py

# æ–¹å¼äºŒï¼šuv
uv sync

# æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨
python -m venv .venv
source .venv/bin/activate   # Windows: .\.venv\Scripts\activate
pip install -r requirements.txt
```

### æœ€å°é…ç½®

å¤åˆ¶ `config.json.example` ä¸º `config.json`ï¼Œå¡«å…¥ LLM API ä¿¡æ¯ï¼š

```json
{
  "api": {
    "api_key": "your-api-key",
    "base_url": "https://api.deepseek.com",
    "model": "deepseek-v3.2"
  }
}
```

æ”¯æŒæ‰€æœ‰ OpenAI å…¼å®¹ APIï¼ˆDeepSeekã€é€šä¹‰åƒé—®ã€OpenAIã€Ollama ç­‰ï¼‰ã€‚

### å¯åŠ¨

```bash
cd frontend && npm run dev ï¼ˆé…ç½®äº†ä¸€é”®å¯åŠ¨ï¼‰
```

---

## åŠŸèƒ½å¯¼è§ˆï¼ˆä¸»é¢æ¿ï¼‰

å¯åŠ¨åè¿›å…¥**ä¸»é¢æ¿ï¼ˆPanelViewï¼‰**ï¼Œé‡‡ç”¨ 3D è§†å·®æ•ˆæœï¼ˆé¼ æ ‡ç§»åŠ¨è§¦å‘é€è§†æ—‹è½¬ï¼‰ã€‚
æ‰€æœ‰åŠŸèƒ½ä»ä¸»é¢æ¿çš„å…«ä¸ªå…¥å£æŒ‰é’®å±•å¼€ï¼š

| # | å…¥å£ | è·¯ç”± | åŠŸèƒ½æ¦‚è¦ |
|---|------|------|----------|
| 1 | **å¯¹è¯** | `/chat` | AI å¯¹è¯ã€æµå¼å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡å‹ç¼© |
| 2 | **è®°å¿†äº‘æµ·** | `/mind` | çŸ¥è¯†å›¾è°± 3D å¯è§†åŒ–ä¸ GRAG è®°å¿†ç®¡ç† |
| 3 | **æŠ€èƒ½å·¥åŠ** | `/skill` | MCP å·¥å…·ç®¡ç†ä¸ç¤¾åŒº Skill å®‰è£… |
| 4 | **å¨œè¿¦ç½‘ç»œ** | `/forum` / `/forum/quota` | ç¤¾åŒºè®ºå›ã€ç§¯åˆ†å¥½æ„Ÿåº¦ |
| 5 | **æ¢æœºé›†å¸‚** | `/market` | èƒŒæ™¯ã€éŸ³ä¹ã€è§’è‰²ã€è®°å¿†è¿ç§»ã€å……å€¼ |
| 6 | **ç»ˆç«¯è®¾ç½®** | `/config` | æ¨¡å‹è¿æ¥ã€è®°å¿†è¿æ¥ã€éŸ³ç”»é…ç½®ï¼ˆä¸‰åˆä¸€ï¼‰ |
| 7 | **éŸ³å¾‹åŠ** | `/music` | BGM æ’­æ”¾å™¨ä¸æ­Œå•ç®¡ç† |
| 8 | **æ‚¬æµ®çƒ** | â€” | è¿›å…¥è½»é‡æ‚¬æµ®çƒçª—å£æ¨¡å¼ |

---

## 1. å¯¹è¯ Â· MessageView

### æµå¼å·¥å…·è°ƒç”¨

å¯¹è¯å¼•æ“é€šè¿‡ SSE æµå¼è¾“å‡ºï¼ŒåŒæ—¶å®æ—¶é€è¾¾å‰ç«¯æ˜¾ç¤ºä¸ TTS åˆ†å¥æ’­æ”¾ã€‚
å·¥å…·è°ƒç”¨ä¸ä¾èµ– OpenAI Function Calling APIï¼ŒLLM åœ¨æ–‡æœ¬ä¸­ä»¥ ` ```tool``` ` ä»£ç å—åµŒå…¥ JSONï¼Œ**ä»»ä½• OpenAI å…¼å®¹æä¾›å•†å‡å¯ä½¿ç”¨**ã€‚

**å•è½®å·¥å…·è°ƒç”¨æµç¨‹ï¼š**

```
LLM æµå¼è¾“å‡º â”€â”€SSEâ”€â”€â–¶ å‰ç«¯å®æ—¶æ˜¾ç¤º
       â”‚
       â–¼
parse_tool_calls_from_text()
  â”œâ”€ Phase 1: æå– ```tool``` ä»£ç å—
  â””â”€ Phase 2: å…œåº•æå–è£¸ JSON
       â”‚
       â–¼
  æŒ‰ agentType è·¯ç”±
  â”œâ”€ "mcp"      â†’ MCPManager.unified_call()
  â”œâ”€ "openclaw" â†’ Agent Server /openclaw/send
  â””â”€ "live2d"   â†’ UI åŠ¨ç”»é€šçŸ¥
       â”‚
       â–¼
  asyncio.gather() å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å·¥å…·
       â”‚
       â–¼
  ç»“æœæ³¨å…¥ messagesï¼Œè¿›å…¥ä¸‹ä¸€è½® LLM è°ƒç”¨ï¼ˆæœ€å¤š 5 è½®ï¼‰
```

- æ–‡æœ¬è§£æï¼š`json5` å®¹é”™è§£æï¼Œå…¨è§’å­—ç¬¦è‡ªåŠ¨æ ‡å‡†åŒ–
- SSE æ ¼å¼ï¼š`data: {"type":"content"|"reasoning","text":"..."}\n\n`ï¼ˆç›´æ¥ JSONï¼Œä¸å« base64ï¼‰
- å¾ªç¯ä¸Šé™ï¼š`max_loop_stream = 5`ï¼ˆå¯é…ç½®ï¼‰

æºç ï¼š[`apiserver/agentic_tool_loop.py`](apiserver/agentic_tool_loop.py)

### ä¸Šä¸‹æ–‡å‹ç¼©

ä¼šè¯ token è¶…è¿‡ 100k æ—¶è‡ªåŠ¨è§¦å‘å‹ç¼©ï¼Œé¿å…ä¸Šä¸‹æ–‡æº¢å‡ºï¼š

| é˜¶æ®µ | è§¦å‘æ—¶æœº | è¡Œä¸º |
|------|----------|------|
| **å¯åŠ¨å‹ç¼©** | ä¼šè¯åŠ è½½æ—¶ | å†å²è¶…é˜ˆå€¼åˆ™ç«‹å³å‹ç¼©å‰æ®µæ¶ˆæ¯ |
| **è¿è¡Œæ—¶å‹ç¼©** | æ¯è½®å¯¹è¯å | è¶…é™åˆ™å‹ç¼©å¹¶æ³¨å…¥ `<compress>` æ ‡ç­¾ |
| **è·¨ä¼šè¯ç»§æ‰¿** | æ–°ä¼šè¯å¯åŠ¨ | è¯»å–ä¸Šæ¬¡æ‘˜è¦ï¼Œæ»šåŠ¨ç´¯ç§¯ä¸Šä¸‹æ–‡ |

æ‘˜è¦ç»“æ„ï¼ˆ6 åˆ†åŒºï¼‰ï¼šå…³é”®äº‹å® / ç”¨æˆ·åå¥½ / é‡è¦å†³å®š / å¾…åŠäº‹é¡¹ / èƒŒæ™¯ä¿¡æ¯ / æœ€è¿‘çŠ¶æ€ã€‚
`<compress>` æ ‡ç­¾æŒä¹…åŒ–åˆ°ä¼šè¯æ–‡ä»¶ï¼Œä¸è®¡å…¥ LLM token ç»Ÿè®¡ã€‚

### DeepSeek æ¨ç†é“¾å±•ç¤º

ä½¿ç”¨ DeepSeek æ—¶ï¼Œ`reasoning` å­—æ®µé€šè¿‡ SSE å®æ—¶æ¨é€ï¼Œå‰ç«¯ä»¥ç‹¬ç«‹æ ·å¼å±•ç¤ºæ€è€ƒè¿‡ç¨‹ã€‚

---

## 2. è®°å¿†äº‘æµ· Â· MindView

### GRAG çŸ¥è¯†å›¾è°±è®°å¿†

GRAGï¼ˆGraph-RAGï¼‰ä»å¯¹è¯ä¸­è‡ªåŠ¨æå–äº”å…ƒç»„å¹¶å­˜å…¥ Neo4jï¼Œå¯¹è¯æ—¶è‡ªåŠ¨æ£€ç´¢ä½œä¸º LLM ä¸Šä¸‹æ–‡ã€‚

**äº”å…ƒç»„ç»“æ„ï¼š**`(ä¸»ä½“, ä¸»ä½“ç±»å‹, è°“è¯, å®¢ä½“, å®¢ä½“ç±»å‹)`

**æå–æµç¨‹ï¼š**

1. ç»“æ„åŒ–æå–ï¼ˆä¼˜å…ˆï¼‰ï¼š`beta.chat.completions.parse()` + Pydantic `QuintupleResponse`ï¼Œ`temperature=0.3`ï¼Œé‡è¯• 3 æ¬¡
2. JSON å…œåº•ï¼šè§£æå¤±è´¥æ—¶æå–é¦–ä¸ª `[` åˆ°æœ«å°¾ `]` çš„å†…å®¹
3. è¿‡æ»¤è§„åˆ™ï¼šåªä¿ç•™äº‹å®ï¼ˆè¡Œä¸ºã€å…³ç³»ã€çŠ¶æ€ã€åå¥½ï¼‰ï¼Œè¿‡æ»¤éšå–»ã€å‡è®¾ã€çº¯æƒ…æ„Ÿ

**å®ä½“ç±»å‹ï¼š** `person` / `location` / `organization` / `item` / `concept` / `time` / `event` / `activity`

**ä»»åŠ¡ç®¡ç†å™¨ï¼š**
- 3 ä¸ª asyncio worker æ¶ˆè´¹ `asyncio.Queue(maxsize=100)`
- SHA-256 å»é‡ï¼šç›¸åŒæ–‡æœ¬çš„é‡å¤ä»»åŠ¡è‡ªåŠ¨è·³è¿‡
- æ¯å°æ—¶æ¸…ç†è¶…è¿‡ 24h çš„å·²å®Œæˆä»»åŠ¡

**åŒé‡å­˜å‚¨ï¼š**
- æœ¬åœ°ï¼š`logs/knowledge_graph/quintuples.json`
- äº‘ç«¯ï¼šNeo4j å›¾æ•°æ®åº“ï¼Œ`graph.merge()` upsert

**RAG æ£€ç´¢ï¼š** å…³é”®è¯æå– â†’ Cypher æŸ¥è¯¢ â†’ æ ¼å¼åŒ–ä¸º `ä¸»ä½“(ç±»å‹) â€”[è°“è¯]â†’ å®¢ä½“(ç±»å‹)` æ³¨å…¥ä¸Šä¸‹æ–‡

**è¿œç¨‹è®°å¿†ï¼š** ç™»å½•ç”¨æˆ·è‡ªåŠ¨ä½¿ç”¨ NagaMemory äº‘ç«¯ï¼Œé€€å‡ºæˆ–ç¦»çº¿æ—¶å›é€€æœ¬åœ° GRAGã€‚

æºç ï¼š[`summer_memory/`](summer_memory/)

### æ„è¯†æµ· 3D å¯è§†åŒ–

Canvas 2D + æ‰‹å†™ 3D æŠ•å½±ï¼ˆé WebGLï¼‰ï¼Œçƒé¢åæ ‡ç›¸æœºï¼Œé€è§†é™¤æ³• `700 / depth`ã€‚

**7 å±‚æ¸²æŸ“é¡ºåºï¼š**
èƒŒæ™¯æ¸å˜ â†’ åœ°é¢ç½‘æ ¼ â†’ æ°´é¢å¹³é¢ â†’ ä½“ç§¯å…‰ï¼ˆ3 æŸå…‰æŸ±ï¼‰â†’ ç²’å­ç³»ç»Ÿï¼ˆ3 å±‚ 125 é¢—ï¼‰â†’ ç”Ÿç‰©è§å…‰æµ®æ¸¸ç”Ÿç‰©ï¼ˆ10 ä¸ªå¸¦æ‹–å°¾ï¼‰â†’ çŸ¥è¯†å›¾è°±èŠ‚ç‚¹ä¸è¾¹ï¼ˆæ·±åº¦æ’åºï¼‰

**å›¾è°±æ˜ å°„ï¼š** `subject/object` â†’ èŠ‚ç‚¹ï¼Œ`predicate` â†’ æœ‰å‘è¾¹ï¼Œåº¦ä¸­å¿ƒæ€§ â†’ èŠ‚ç‚¹é«˜åº¦æƒé‡ï¼Œä¸Šé™ 100 èŠ‚ç‚¹

**äº¤äº’ï¼š** æ‹–æ‹½æ—‹è½¬ã€ä¸­é”®å¹³ç§»ã€æ»šè½®ç¼©æ”¾ã€èŠ‚ç‚¹ç‚¹é€‰/æ‹–æ‹½ã€å…³é”®è¯æœç´¢è¿‡æ»¤

---

## 3. æŠ€èƒ½å·¥åŠ Â· SkillView

### å†…ç½® MCP Agent

åŸºäº [Model Context Protocol](https://modelcontextprotocol.io/) çš„å¯æ’æ‹”å·¥å…·æ¶æ„ï¼Œæ¯ä¸ªå·¥å…·ä»¥ç‹¬ç«‹ Agent è¿è¡Œï¼š

| Agent | åŠŸèƒ½ |
|-------|------|
| `weather_time` | å¤©æ°”æŸ¥è¯¢ / é¢„æŠ¥ã€ç³»ç»Ÿæ—¶é—´ã€è‡ªåŠ¨åŸå¸‚ / IP æ£€æµ‹ |
| `open_launcher` | æ‰«æç³»ç»Ÿå·²å®‰è£…åº”ç”¨ï¼Œè‡ªç„¶è¯­è¨€å¯åŠ¨ç¨‹åº |
| `game_guide` | æ¸¸æˆç­–ç•¥é—®ç­”ã€ä¼¤å®³è®¡ç®—ã€é…é˜Ÿæ¨èã€è‡ªåŠ¨æˆªå›¾æ³¨å…¥ |
| `online_search` | åŸºäº SearXNG çš„ç½‘ç»œæœç´¢ |
| `crawl4ai` | åŸºäº Crawl4AI çš„ç½‘é¡µå†…å®¹æå– |
| `playwright_master` | åŸºäº Playwright çš„æµè§ˆå™¨è‡ªåŠ¨åŒ– |
| `vision` | æˆªå›¾åˆ†æä¸è§†è§‰é—®ç­” |
| `mqtt_tool` | MQTT åè®® IoT è®¾å¤‡æ§åˆ¶ |
| `office_doc` | docx / xlsx å†…å®¹æå– |

**æ³¨å†Œä¸å‘ç°ï¼š** `mcp_registry.py` glob æ‰«æ `**/agent-manifest.json`ï¼Œ`importlib.import_module` åŠ¨æ€å®ä¾‹åŒ–ã€‚

### MCP ç®¡ç† UI

å‰ç«¯ `McpAddDialog.vue` æä¾›å›¾å½¢åŒ– MCP å·¥å…·ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒåœ¨çº¿æ·»åŠ  / åˆ é™¤å·¥å…·ï¼ˆæ— éœ€é‡å¯ï¼‰ã€‚

### ç¤¾åŒº Skill å®‰è£…

æŠ€èƒ½å·¥åŠæ”¯æŒä¸€é”®å®‰è£…ç¤¾åŒºå‘å¸ƒçš„ Skillï¼ˆAgent Browserã€Brainstormingã€Context7ã€Firecrawl Search ç­‰ï¼‰ã€‚
åç«¯æ¥å£ï¼š`GET /openclaw/market/items`ã€`POST /openclaw/market/items/{id}/install`

æºç ï¼š[`mcpserver/`](mcpserver/)

---

## 4. å¨œè¿¦ç½‘ç»œ Â· è®ºå›ç¤¾åŒº

### ç¤¾åŒºè®ºå›

ä»ä¸»é¢æ¿"å¨œè¿¦ç½‘ç»œ"åŒºå—è¿›å…¥ï¼Œå†…åµŒå®Œæ•´ç¤¾åŒºåŠŸèƒ½ï¼š

| è§†å›¾ | è·¯ç”± | åŠŸèƒ½ |
|------|------|------|
| `ForumListView` | `/forum` | å¸–å­åˆ—è¡¨ã€åˆ†ç±»ç­›é€‰ |
| `ForumPostView` | `/forum/post/:id` | å¸–å­è¯¦æƒ…ä¸å›å¤ |
| `ForumMessagesView` | `/forum/messages` | ç§ä¿¡æ¶ˆæ¯ |
| `ForumMyPostsView` | `/forum/my-posts` | æˆ‘çš„å‘å¸– |
| `ForumMyRepliesView` | `/forum/my-replies` | æˆ‘çš„å›å¤ |
| `ForumQuotaView` | `/forum/quota` | ç§¯åˆ†é…é¢ä¸æ¢ç´¢å…¥å£ |

æºç ï¼š[`frontend/src/forum/`](frontend/src/forum/)

### ç§¯åˆ†å¥½æ„Ÿåº¦ç³»ç»Ÿ

ç™»å½•ç”¨æˆ·ä¸“å±çš„æ¸¸æˆåŒ–äº’åŠ¨ä½“ç³»ï¼š

| ç»´åº¦ | è¯´æ˜ |
|------|------|
| **ç§¯åˆ† (Credits)** | ç­¾åˆ° / è¿ç­¾å¥–åŠ±ç§¯ç´¯ï¼Œç”¨äºå…‘æ¢æ¨¡å‹é¢åº¦ |
| **å¥½æ„Ÿåº¦ (Affinity)** | æ¯æ¬¡ç­¾åˆ°å¢é•¿ï¼Œåæ˜ ä¸å¨œè¿¦çš„å…³ç³»æ·±åº¦ |
| **æ¯æ—¥ç­¾åˆ°** | ç”¨æˆ·èœå•ä¸€é”®ç­¾åˆ°ï¼Œè¿ç»­ç­¾åˆ°è§¦å‘é¢å¤–å¥–åŠ± |

ç›¸å…³ APIï¼ˆé€šè¿‡ API Server ä»£ç†è‡³ Naga é—¨æˆ·ï¼‰ï¼š`/api/checkin`ã€`/api/affinity`ã€`/api/credits`

---

## 5. æ¢æœºé›†å¸‚ Â· MarketView

æ¢æœºé›†å¸‚æ•´åˆäº†æ‰€æœ‰èµ„æºè·å–ä¸ç®¡ç†å…¥å£ï¼Œåˆ†ä¸ºä¸ƒä¸ª Tabï¼š

| Tab | è¯´æ˜ |
|-----|------|
| **ç•Œé¢èƒŒæ™¯** | åˆ‡æ¢åº”ç”¨ä¸»é¢˜èƒŒæ™¯ |
| **éŸ³ä¹‹å··** | è´­ä¹° / è§£é”éŸ³ä¹ä¸“è¾‘ï¼ˆå½“å‰ï¼šæ²™ä¹‹ä¹¦ï¼‰ |
| **è§’è‰²æ³¨å†Œ** | ç»‘å®š / åˆ‡æ¢ AI è§’è‰²ï¼ˆéœ€ç™»å½•ï¼‰ |
| **è®°å¿†äº‘è¿** | äº‘ç«¯è®°å¿†æ•°æ®è¿ç§»ä¸ç®¡ç† |
| **MCP å·¥å…·** | MCP å·¥å…·å›¾å½¢åŒ–ç®¡ç† |
| **æ™ºèƒ½ä½“æŠ€èƒ½** | ç¤¾åŒº Skill ä¸€é”®å®‰è£… |
| **æ¨¡å‹å……å€¼** | Naga é—¨æˆ·ç§¯åˆ†å……å€¼ |

---

## 6. ç»ˆç«¯è®¾ç½® Â· ConfigView

è®¾ç½®é¡µä¸‰åˆä¸€é‡æ„ï¼ŒåŸåˆ†æ•£é…ç½®é›†ä¸­åœ¨å•ä¸€é¡µé¢çš„ä¸‰ä¸ª Tabï¼š

| Tab | å†…å®¹ |
|-----|------|
| **æ¨¡å‹è¿æ¥** | LLM API Keyã€Base URLã€æ¨¡å‹é€‰æ‹© |
| **è®°å¿†è¿æ¥** | Neo4j è¿æ¥å‚æ•°ã€NagaMemory äº‘ç«¯é…ç½® |
| **éŸ³ç”»é…ç½®** | è§’è‰²æ¡£æ¡ˆã€Live2D æ¨¡å‹ä¸ SSAAã€TTS å£°éŸ³ã€èŠå¤©å­—å· |

### è§’è‰²å¡ç³»ç»Ÿ

`characters/` ç›®å½•ç®¡ç†å¯åˆ‡æ¢çš„ AI è§’è‰²ï¼Œæ¯ä¸ªè§’è‰²ä»¥ JSON é…ç½®æ–‡ä»¶æè¿°ï¼š

```json
{
  "ai_name": "å¨œæ°æ—¥è¾¾",
  "user_name": "ç”¨æˆ·",
  "live2d_model": "NagaTest2/NagaTest2.model3.json",
  "prompt_file": "conversation_style_prompt.txt",
  "portrait": "Naga.png",
  "bio": "ç”±å¼€å‘è€…æŸæ–¯é˜”è½äº²æ‰‹åˆ›é€ çš„AIåŠ©æ‰‹ï¼Œç®€ç§°å¨œè¿¦ã€‚"
}
```

- æ¯ä¸ªè§’è‰²ç›®å½•åŒ…å«ç‹¬ç«‹çš„å¯¹è¯é£æ ¼æç¤ºè¯ã€Live2D æ¨¡å‹èµ„æºã€ç«‹ç»˜å›¾åƒ
- æ¿€æ´»è§’è‰²åï¼ŒAI åç§°ä¸ Live2D æ¨¡å‹ç”±è§’è‰² JSON ç»Ÿä¸€ç®¡ç†ï¼Œä¸å¯åœ¨ç•Œé¢æ‰‹åŠ¨è¦†ç›–
- é»˜è®¤è§’è‰²ï¼š**å¨œæ°æ—¥è¾¾**

æºç ï¼š[`characters/`](characters/)

---

## 7. éŸ³å¾‹åŠ Â· MusicView

ç‹¬ç«‹éŸ³ä¹æ’­æ”¾å™¨ï¼Œä¸ä¸»ç•Œé¢ BGM **å…±äº«åŒä¸€æ’­æ”¾å®ä¾‹**ï¼ˆç»Ÿä¸€ BGM æ¶æ„ï¼‰ï¼š

- **æ­Œå•ç¼–è¾‘**ï¼ˆ`MusicEditView`ï¼‰ï¼šç®¡ç†æ›²ç›®åˆ—è¡¨ï¼Œä¿å­˜åå®æ—¶åŒæ­¥è‡³å…¨å±€æ’­æ”¾å™¨
- **æ’­æ”¾çŠ¶æ€åŒæ­¥**ï¼šæ’­æ”¾ / æš‚åœå›¾æ ‡ä¸éŸ³é¢‘äº‹ä»¶å®æ—¶è”åŠ¨
- **åˆ—è¡¨å¾ªç¯**ï¼šå½“å‰æ›²ç›®ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–
- **Live2D å£å‹åŒæ­¥**ï¼šTTS æ’­æ”¾æœŸé—´ï¼Œ`AdvancedLipSyncEngineV2` ä»¥ 60FPS é©±åŠ¨ Live2D å˜´å½¢

---

## 8. æ‚¬æµ®çƒ Â· FloatingView

ç‚¹å‡»ä¸»é¢æ¿"æ‚¬æµ®"æŒ‰é’®è¿›å…¥è½»é‡æ‚¬æµ®çƒçª—å£æ¨¡å¼ï¼Œå››ç§çŠ¶æ€å¾ªç¯åˆ‡æ¢ï¼š

```
ballï¼ˆ100Ã—100 åœ†çƒï¼‰â†’ compactï¼ˆ420Ã—100 æŠ˜å æ¡ï¼‰â†’ fullï¼ˆ420Ã—N å±•å¼€ï¼‰â†’ classicï¼ˆæ­£å¸¸çª—å£ï¼‰
```

**å¤–è§‚ä¸åŠ¨æ•ˆï¼š**
- åºåˆ—å¸§çœ¨çœ¼åŠ¨ç”»ï¼š5 å¸§ï¼ˆççœ¼ â†’ åŠé—­ â†’ é—­çœ¼ â†’ åŠé—­ â†’ ççœ¼ï¼‰ï¼Œ70ms / å¸§ï¼Œéšæœºé—´éš”è§¦å‘
- ç”Ÿæˆå›å¤æ—¶ï¼šçƒä½“å…‰æ™•è„‰å†²ç‰¹æ•ˆ
- æ‚¬åœæ—¶ï¼šäº®åº¦æå‡æ•ˆæœ
- é€æ˜æ— è¾¹æ¡†çª—å£ï¼Œæ”¯æŒè‡ªç”±æ‹–æ‹½å®šä½

**åŠŸèƒ½ï¼š**
- æ‚¬æµ®çŠ¶æ€ä¸‹å¯ç›´æ¥è¾“å…¥å¯¹è¯ï¼Œå†å²æ¶ˆæ¯åœ¨ compact / full çŠ¶æ€ä¸‹å¯å›æº¯
- æˆªå›¾æ•è·é¢æ¿ï¼šé€‰å–å±å¹•çª—å£ä½œä¸ºå›¾åƒé™„ä»¶
- æ–‡ä»¶ä¸Šä¼ æ”¯æŒ
- å³é”®èœå•é€šè¿‡ Electron åŸç”Ÿèœå•å®ç°ï¼ˆé¿å…å°çª—å£è£å‰ªï¼‰

---

## å…¨å±€åŠŸèƒ½

### è¯­éŸ³äº¤äº’

**TTSï¼ˆè¯­éŸ³åˆæˆï¼‰**

- å¼•æ“ï¼šEdge-TTSï¼ŒOpenAI å…¼å®¹æ¥å£ `/v1/audio/speech`
- æ¶æ„ï¼š3 çº¿ç¨‹æµæ°´çº¿ â€” åˆ†å¥é˜Ÿåˆ— â†’ TTS è°ƒç”¨ï¼ˆSemaphore(2) å¹¶å‘ï¼‰â†’ pygame æ’­æ”¾
- Live2D å£å‹åŒæ­¥ï¼š60FPS æå– 5 å‚æ•°ï¼ˆmouth_open / mouth_form / mouth_smile / eye_brow_up / eye_wideï¼‰
- ç«¯å£æ¸…ç†ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨æ£€æµ‹å¹¶é‡Šæ”¾å ç”¨ç«¯å£

**ASRï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰**

- æœ¬åœ°å¼•æ“ï¼šFunASRï¼Œæ”¯æŒ VAD ç«¯ç‚¹æ£€æµ‹ä¸ WebSocket å®æ—¶æµ
- ä¸‰æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ï¼š`LOCAL`ï¼ˆFunASRï¼‰â†’ `END_TO_END`ï¼ˆQwen Omniï¼‰â†’ `HYBRID`

**å®æ—¶è¯­éŸ³å¯¹è¯**ï¼ˆéœ€ DashScope API Keyï¼‰

- åŸºäº Qwen Omni çš„å…¨åŒå·¥ WebSocket è¯­éŸ³äº¤äº’
- å›å£°æŠ‘åˆ¶ã€VAD æ£€æµ‹ã€éŸ³é¢‘åˆ†å—ï¼ˆ200msï¼‰ã€ä¼šè¯å†·å´æ§åˆ¶

```json
{
  "voice_realtime": {
    "enabled": true,
    "provider": "qwen",
    "api_key": "your-dashscope-key",
    "model": "qwen3-omni-flash-realtime"
  }
}
```

æºç ï¼š[`voice/`](voice/)

---

### Live2D è™šæ‹Ÿå½¢è±¡

ä½¿ç”¨ **pixi-live2d-display** + **PixiJS WebGL** æ¸²æŸ“ Cubism Live2D æ¨¡å‹ã€‚
SSAA è¶…é‡‡æ ·æŠ—é”¯é½¿ï¼šCanvas æŒ‰ `width Ã— ssaa` æ¸²æŸ“ï¼ŒCSS `transform: scale(1/ssaa)` ç¼©æ”¾ã€‚

**4 é€šé“æ­£äº¤åŠ¨ç”»ç³»ç»Ÿ**ï¼ˆ`live2dController.ts`ï¼‰ï¼š

| é€šé“ | æ§åˆ¶å†…å®¹ | ç‰¹æ€§ |
|------|----------|------|
| **ä½“æ€ (State)** | idle / thinking / talking å¾ªç¯ | hermite å¹³æ»‘æ’å€¼ï¼Œä» `naga-actions.json` åŠ è½½ |
| **åŠ¨ä½œ (Action)** | ç‚¹å¤´ / æ‘‡å¤´ç­‰å¤´éƒ¨åŠ¨ä½œ | FIFO é˜Ÿåˆ—ï¼Œå•ä¸€æ‰§è¡Œ |
| **è¡¨æƒ… (Emotion)** | `.exp3.json` è¡¨æƒ…æ–‡ä»¶ | Add / Multiply / Overwrite ä¸‰ç§æ··åˆæ¨¡å¼ï¼ŒæŒ‡æ•°è¡°å‡è¿‡æ¸¡ |
| **è¿½è¸ª (Tracking)** | é¼ æ ‡è§†çº¿è·Ÿéš | å¯é…å»¶è¿Ÿå¯åŠ¨ï¼Œ`tracking_hold_delay_ms` |

åˆå¹¶é¡ºåºï¼šä½“æ€ â†’ å˜´å½¢ â†’ åŠ¨ä½œ â†’ æ‰‹åŠ¨è¦†ç›– â†’ è¡¨æƒ…æ··åˆ â†’ è¿½è¸ªæ··åˆ

---

### OpenClaw ç”µè„‘æ§åˆ¶

å¯¹æ¥ OpenClaw Gatewayï¼ˆç«¯å£ 18789ï¼‰ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€è°ƒåº¦ AI ç¼–ç¨‹åŠ©æ‰‹æ‰§è¡Œæœ¬åœ°ä»»åŠ¡ã€‚

- **ä¸‰çº§å›é€€å¯åŠ¨ï¼š** æ‰“åŒ…å†…åµŒ â†’ å…¨å±€ `openclaw` å‘½ä»¤ â†’ è‡ªåŠ¨ `npm install -g openclaw`
- æ”¯æŒ sessionKey hooksï¼ˆ2026.2.17+ï¼‰ï¼Œå¯é…ç½®è‡ªå®šä¹‰ hooks è·¯å¾„
- `POST /openclaw/send` å‘é€æŒ‡ä»¤ï¼Œæœ€é•¿ç­‰å¾… 120 ç§’

**ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆ`TaskScheduler`ï¼‰ï¼š**
- ä»»åŠ¡æ­¥éª¤è®°å½•ï¼ˆç›®çš„ / å†…å®¹ / è¾“å‡º / åˆ†æ / æˆåŠŸä¸å¦ï¼‰
- è‡ªåŠ¨æå–"å…³é”®å‘ç°"æ ‡è®°
- å†…å­˜å‹ç¼©ï¼šæ­¥éª¤æ•°è¶…é˜ˆå€¼æ—¶è°ƒç”¨ LLM ç”Ÿæˆ `CompressedMemory`ï¼ˆkey_findings / failed_attempts / current_status / next_stepsï¼‰
- `schedule_parallel_execution()` é€šè¿‡ `asyncio.gather()` å¹¶è¡Œæ‰§è¡Œä»»åŠ¡åˆ—è¡¨

æºç ï¼š[`agentserver/`](agentserver/)

---

### å¯åŠ¨åŠ¨ç”»

| é˜¶æ®µ | å†…å®¹ |
|------|------|
| **æ ‡é¢˜é˜¶æ®µ** | é»‘è‰²é®ç½© + 40 é¢—é‡‘è‰²ä¸Šå‡ç²’å­ + æ ‡é¢˜å›¾ç‰‡ 2.4s CSS keyframeï¼›æ ‡é¢˜å‡ºç°æ—¶è‡ªåŠ¨æ’­æ”¾å”¤é†’è¯­éŸ³ |
| **è¿›åº¦é˜¶æ®µ** | Neural Network ç²’å­èƒŒæ™¯ + Live2D é€å‡ºæ¡† + é‡‘è‰²è¿›åº¦æ¡ï¼ˆ`requestAnimationFrame` æ’å€¼ï¼Œæœ€ä½é€Ÿåº¦ 0.5 å…œåº•ï¼‰ |
| **åœæ»æ£€æµ‹** | 3 ç§’æ— è¿›åº¦å˜åŒ–æ˜¾ç¤ºé‡å¯æç¤ºï¼›è¿›åº¦ 25% åæ¯ç§’è½®è¯¢åç«¯ `/health` |
| **å”¤é†’** | è¿›åº¦ 100% åæ˜¾ç¤º"ç‚¹å‡»å”¤é†’"è„‰å†²æç¤º |

---

## åç«¯æ¶æ„

NagaAgent ç”±å››ä¸ªç‹¬ç«‹å¾®æœåŠ¡ç»„æˆï¼Œ`main.py` ç»Ÿä¸€ç¼–æ’å¯åŠ¨ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Electron / PyQt5 å‰ç«¯                   â”‚
â”‚  Vue 3 + Vite + UnoCSS + PrimeVue + pixi-live2d-display â”‚
â”‚                                                         â”‚
â”‚  PanelView Â· MessageView Â· MindView Â· SkillView         â”‚
â”‚  MarketView Â· ConfigView Â· MusicView Â· FloatingView     â”‚
â”‚  ForumListView Â· ForumPostView Â· ForumQuotaView â€¦       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚             â”‚              â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚  API Server  â”‚ â”‚  Agent  â”‚  â”‚   Voice    â”‚
   â”‚   :8000      â”‚ â”‚  Server â”‚  â”‚  Service   â”‚
   â”‚              â”‚ â”‚  :8001  â”‚  â”‚   :5048    â”‚
   â”‚ å¯¹è¯ / SSE   â”‚ â”‚         â”‚  â”‚            â”‚
   â”‚ å·¥å…·è°ƒç”¨     â”‚ â”‚ ä»»åŠ¡è°ƒåº¦â”‚  â”‚ TTS / ASR  â”‚
   â”‚ ä¸Šä¸‹æ–‡å‹ç¼©   â”‚ â”‚ OpenClawâ”‚  â”‚ å®æ—¶è¯­éŸ³   â”‚
   â”‚ æ–‡æ¡£ä¸Šä¼      â”‚ â”‚         â”‚  â”‚            â”‚
   â”‚ è®¤è¯ä»£ç†     â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ è®°å¿† API     â”‚      â”‚
   â”‚ Skill å¸‚åœº   â”‚  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ é…ç½®ç®¡ç†     â”‚  â”‚  OpenClaw    â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  Gateway    â”‚
          â”‚          â”‚  :18789     â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚ MCP Server  â”‚
   â”‚   :8003     â”‚
   â”‚ å·¥å…·æ³¨å†Œ    â”‚
   â”‚ Agent å‘ç°  â”‚
   â”‚ å¹¶è¡Œè°ƒåº¦    â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚      MCP Agentsï¼ˆå¯æ’æ‹”ï¼‰      â”‚
  â”‚ å¤©æ°” | æœç´¢ | æŠ“å– | è§†è§‰     â”‚
  â”‚ å¯åŠ¨å™¨ | æ”»ç•¥ | æ–‡æ¡£ | MQTT   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚    Neo4j    â”‚
   â”‚   :7687     â”‚
   â”‚  çŸ¥è¯†å›¾è°±   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
NagaAgent/
â”œâ”€â”€ main.py                   # ç»Ÿä¸€å…¥å£ï¼Œç¼–æ’æ‰€æœ‰æœåŠ¡
â”œâ”€â”€ build.py                  # è·¨å¹³å°æ„å»ºè„šæœ¬
â”œâ”€â”€ config.json               # è¿è¡Œæ—¶é…ç½®ï¼ˆä» config.json.example å¤åˆ¶ï¼‰
â”œâ”€â”€ pyproject.toml            # ç‰ˆæœ¬ 5.1.0ï¼Œé¡¹ç›®å…ƒæ•°æ®ä¸ä¾èµ–
â”‚
â”œâ”€â”€ apiserver/                # API Serverï¼ˆ:8000ï¼‰
â”‚   â”œâ”€â”€ api_server.py         #   FastAPI ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ agentic_tool_loop.py  #   å¤šè½®å·¥å…·è°ƒç”¨å¾ªç¯
â”‚   â”œâ”€â”€ llm_service.py        #   LiteLLM ç»Ÿä¸€ LLM è°ƒç”¨
â”‚   â””â”€â”€ streaming_tool_extractor.py  # æµå¼åˆ†å¥ + TTS åˆ†å‘
â”‚
â”œâ”€â”€ agentserver/              # Agent Serverï¼ˆ:8001ï¼‰
â”‚   â”œâ”€â”€ agent_server.py
â”‚   â””â”€â”€ task_scheduler.py     #   ä»»åŠ¡ç¼–æ’ + å‹ç¼©è®°å¿†
â”‚
â”œâ”€â”€ mcpserver/                # MCP Serverï¼ˆ:8003ï¼‰
â”‚   â”œâ”€â”€ mcp_server.py
â”‚   â”œâ”€â”€ mcp_registry.py       #   manifest æ‰«æ + åŠ¨æ€æ³¨å†Œ
â”‚   â”œâ”€â”€ mcp_manager.py        #   unified_call() è·¯ç”±
â”‚   â”œâ”€â”€ agent_weather_time/
â”‚   â”œâ”€â”€ agent_open_launcher/
â”‚   â”œâ”€â”€ agent_game_guide/
â”‚   â”œâ”€â”€ agent_online_search/
â”‚   â”œâ”€â”€ agent_crawl4ai/
â”‚   â”œâ”€â”€ agent_playwright_master/
â”‚   â”œâ”€â”€ agent_vision/
â”‚   â”œâ”€â”€ agent_mqtt_tool/
â”‚   â””â”€â”€ agent_office_doc/
â”‚
â”œâ”€â”€ summer_memory/            # GRAG çŸ¥è¯†å›¾è°±è®°å¿†
â”‚   â”œâ”€â”€ quintuple_extractor.py
â”‚   â”œâ”€â”€ quintuple_graph.py
â”‚   â”œâ”€â”€ quintuple_rag_query.py
â”‚   â”œâ”€â”€ task_manager.py
â”‚   â”œâ”€â”€ memory_manager.py
â”‚   â””â”€â”€ memory_client.py      #   NagaMemory è¿œç¨‹å®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ voice/                    # è¯­éŸ³æœåŠ¡ï¼ˆ:5048ï¼‰
â”‚   â”œâ”€â”€ output/               #   TTS + å£å‹åŒæ­¥
â”‚   â””â”€â”€ input/                #   ASR + å®æ—¶è¯­éŸ³
â”‚
â”œâ”€â”€ characters/               # è§’è‰²é…ç½®ç›®å½•
â”‚   â””â”€â”€ å¨œæ°æ—¥è¾¾/             #   prompt / Live2D æ¨¡å‹ / ç«‹ç»˜
â”‚
â”œâ”€â”€ frontend/                 # Electron + Vue 3 å‰ç«¯
â”‚   â”œâ”€â”€ electron/             #   ä¸»è¿›ç¨‹
â”‚   â”‚   â””â”€â”€ modules/          #   backend / hotkeys / menu / tray / updater / window
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ views/            #   æ‰€æœ‰é¡µé¢è§†å›¾
â”‚       â”œâ”€â”€ forum/            #   è®ºå›æ¨¡å—
â”‚       â”œâ”€â”€ components/       #   é€šç”¨ç»„ä»¶
â”‚       â”œâ”€â”€ composables/      #   useAuth / useBackground / useAudio â€¦
â”‚       â””â”€â”€ utils/            #   live2dController / session / config
â”‚
â”œâ”€â”€ system/                   # é…ç½®åŠ è½½ã€ç¯å¢ƒæ£€æµ‹ã€ç³»ç»Ÿæç¤ºè¯
â”œâ”€â”€ guide_engine/             # æ¸¸æˆæ”»ç•¥å¼•æ“
â””â”€â”€ logs/                     # è¿è¡Œæ—¥å¿—ã€çŸ¥è¯†å›¾è°±æ–‡ä»¶
```

---

## å¯é€‰é…ç½®

<details>
<summary><b>çŸ¥è¯†å›¾è°±è®°å¿†ï¼ˆNeo4jï¼‰</b></summary>

å®‰è£… Neo4jï¼ˆ[Docker](https://hub.docker.com/_/neo4j) æˆ– [Neo4j Desktop](https://neo4j.com/download/)ï¼‰ï¼Œé…ç½® `config.json`ï¼š

```json
{
  "grag": {
    "enabled": true,
    "neo4j_uri": "neo4j://127.0.0.1:7687",
    "neo4j_user": "neo4j",
    "neo4j_password": "your-password"
  }
}
```

ä¸é…ç½® Neo4j æ—¶ï¼ŒGRAG ä»…ä½¿ç”¨æœ¬åœ° JSON æ–‡ä»¶å­˜å‚¨ï¼ŒåŠŸèƒ½ä¸å—å½±å“ã€‚
</details>

<details>
<summary><b>è¯­éŸ³äº¤äº’ï¼ˆTTS / ASRï¼‰</b></summary>

```json
{
  "system": { "voice_enabled": true },
  "tts": {
    "port": 5048,
    "default_voice": "zh-CN-XiaoxiaoNeural"
  }
}
```

å®æ—¶å…¨åŒå·¥è¯­éŸ³å¯¹è¯ï¼ˆéœ€é€šä¹‰åƒé—® DashScope API Keyï¼‰ï¼š

```json
{
  "voice_realtime": {
    "enabled": true,
    "provider": "qwen",
    "api_key": "your-dashscope-key",
    "model": "qwen3-omni-flash-realtime"
  }
}
```
</details>

<details>
<summary><b>Live2D è™šæ‹Ÿå½¢è±¡ï¼ˆè‡ªå®šä¹‰æ¨¡å‹ï¼‰</b></summary>

```json
{
  "web_live2d": {
    "ssaa": 2,
    "model": {
      "source": "./models/your-model/model.model3.json",
      "x": 0.5,
      "y": 1.3,
      "size": 6800
    },
    "face_y_ratio": 0.13,
    "tracking_hold_delay_ms": 100
  }
}
```

å¯ç”¨è§’è‰²å¡åï¼Œ`ai_name` ä¸ `model.source` ç”±è§’è‰² JSON è‡ªåŠ¨è¦†ç›–ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ã€‚
</details>

<details>
<summary><b>MQTT ç‰©è”ç½‘æ§åˆ¶</b></summary>

```json
{
  "mqtt": {
    "enabled": true,
    "broker": "mqtt-broker-address",
    "port": 1883,
    "topic": "naga/agent/topic",
    "client_id": "naga-agent-client"
  }
}
```
</details>

---

## ç«¯å£ä¸€è§ˆ

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| API Server | 8000 | ä¸»æ¥å£ï¼šå¯¹è¯ã€é…ç½®ã€è®¤è¯ã€Skill å¸‚åœº |
| Agent Server | 8001 | ä»»åŠ¡è°ƒåº¦ã€OpenClaw |
| MCP Server | 8003 | MCP å·¥å…·æ³¨å†Œä¸è°ƒåº¦ |
| Voice Service | 5048 | TTS / ASR |
| Neo4j | 7687 | çŸ¥è¯†å›¾è°±ï¼ˆå¯é€‰ï¼‰ |
| OpenClaw Gateway | 18789 | AI ç”µè„‘æ§åˆ¶ï¼ˆå¯é€‰ï¼‰ |

---

## æ•…éšœæ’é™¤

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|----------|
| Python ç‰ˆæœ¬æŠ¥é”™ | å¿…é¡»ä½¿ç”¨ Python 3.11ï¼›æ¨èç”¨ uv è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬ |
| ç«¯å£è¢«å ç”¨ | æ£€æŸ¥ 8000ã€8001ã€8003ã€5048 æ˜¯å¦å¯ç”¨ |
| Neo4j è¿æ¥è¶…æ—¶ / æŒ‚èµ· | å·²åœ¨ 2.24 ä¿®å¤ï¼›ç¡®è®¤ Neo4j æœåŠ¡å·²å¯åŠ¨ |
| TTS æ— å£°éŸ³ / CORS æŠ¥é”™ | å·²åœ¨ 2.25 ä¿®å¤ï¼›ç¡®è®¤ `voice_enabled: true` |
| å¯åŠ¨å¡åœ¨è¿›åº¦æ¡ | æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®ï¼›ç­‰å¾… 3 ç§’åå‡ºç°é‡å¯æç¤º |
| æ‚¬æµ®çƒå¤´åƒä¸æ˜¾ç¤º | å·²åœ¨ 2.17 ä¿®å¤åºåˆ—å¸§è·¯å¾„ï¼›ç¡®è®¤ä½¿ç”¨æœ€æ–°æ‰“åŒ…ç‰ˆæœ¬ |
| config.json ä¹±ç  | å·²åœ¨ 2.19 ä¿®å¤ï¼šconfig_manager è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç  |
| OpenClaw å¯åŠ¨å¤±è´¥ | å·²åœ¨ 2.24 ä¿®å¤å…¨å±€æ¨¡å¼ç¼ºå°‘é…ç½®æ–‡ä»¶çš„é—®é¢˜ |

```bash
python main.py --check-env --force-check  # å®Œæ•´ç¯å¢ƒè¯Šæ–­
python main.py --quick-check              # å¿«é€Ÿæ£€æŸ¥
python update.py                          # è‡ªåŠ¨ git pull + ä¾èµ–åŒæ­¥
```

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestã€‚å¦‚æœ‰é—®é¢˜ï¼Œå¯åŠ å…¥ QQ é¢‘é“ **nagaagent1**ã€‚

---

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=RTGS2017/NagaAgent&type=date&legend=top-left)](https://www.star-history.com/#RTGS2017/NagaAgent&type=date&legend=top-left)
